
@{
    ViewBag.Title = "討論版 -";
}

@section style{
    <link href="~/Content/Lapis.css" rel="stylesheet" />
}
<div class="container body-content">
    <h2 class="d-flex justify-content-center" style="margin:50px 0 20px 0;">發表新文章</h2>
    <div class="container body-content col-8 edit-discuss-outline">
        <form id="form-Article">
            <div class="row" style="background-color:#2d3d5a;color:#fff;padding:10px 0 10px 20px">
                <select class="list-sort" name="Category" required>
                    <option value="" disabled selected hidden>文章分類</option>
                    <option value="問題">問題討論</option>
                    <option value="心得">心得分享</option>
                    <option value="校正">文章校正</option>
                    <option value="翻譯">翻譯專區</option>
                    <option value="情報">情報分享</option>
                </select>
                <input type="text" placeholder="請輸入標題" class="form-control ml-2" style="min-width:577px" id="Title" name="Title" required />
            </div>
            <div class="row mt-3" style="margin:5px;">
                <textarea class="form-control m-auto main-textarea" placeholder="本文" name="Main" id="Main" required></textarea>
            </div>
        </form>
        <div class=" row my-3 justify-content-between">
            <span class="msg" id="Edit-msg"></span>
            <div class="btn list-btn-select" style="width:60px;margin-right:20px;" id="submit">
                <a class="btn-a-select">送出</a>
            </div>

        </div>
    </div>
</div>
<div class="demo" id="lapis-demo1">demo</div>

@section scripts{
    <script>
        //<-----------------------------編輯回覆文章--------------------------------->
        //<----------------------------文字編輯器生成-------------------------------->
        tinymce.init({
            selector: "#Main",
            width: '682px',
            height: 500,
            auto_focus: "Main",
            statusbar: false,
            menubar: "",
            toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent forecolor backcolor",
        });
        $("#lapis-demo1").click(function () {
            $("select[name='Category']").val("問題");
            $("#Title").val("想請教這句日文的分析")
            tinymce.get("Main").setContent(unescape("%3Cp%3E%3Cspan%20style%3D%22color%3A%20%23333333%3B%20font-family%3A%20%27Helvetica%20Neue%27%2C%20Helvetica%2C%20Roboto%2C%20Arial%2C%20%27Lucida%20Grande%27%2C%20%27PingFang%20TC%27%2C%20%u860B%u679C%u5137%u4E2D%u9ED1%2C%20%27Apple%20LiGothic%20Medium%27%2C%20sans-serif%3B%20font-size%3A%2015px%3B%20background-color%3A%20%23ffffff%3B%22%3E%u8ACB%u554F%u9019%u53E5%u65E5%u6587%3C/span%3E%3C/p%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%20color%3A%20%23333333%3B%20font-family%3A%20%27Helvetica%20Neue%27%2C%20Helvetica%2C%20Roboto%2C%20Arial%2C%20%27Lucida%20Grande%27%2C%20%27PingFang%20TC%27%2C%20%u860B%u679C%u5137%u4E2D%u9ED1%2C%20%27Apple%20LiGothic%20Medium%27%2C%20sans-serif%3B%20font-size%3A%2015px%3B%20background-color%3A%20%23ffffff%3B%22%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%u5148%u65E5%uFF08%u305B%u3093%u3058%u3064%uFF09.%u7ADC%u4E5F%uFF08%u305F%u3064%u3084%uFF09%u541B%u304B%u3089%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u4F55%u56DE%3C/span%3E%u304B%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u7740%u4FE1%3C/span%3E%u304C%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u3042%u3063%u305F%u306E%u3067%u3059%u304C%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%u51FA%u3089%u308C%u306A%u304B%u3063%u305F%u3068%u304D%u3001%u305D%u306E%u5F8C%uFF08%u3054%uFF09%u3001%u5C0F%u6817%uFF08%u304A%u3050%u308A%uFF09%u541B%u304B%u3089%u7740%u4FE1%u304C%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%u3042%u308A%3C/span%3E%u3001%u305D%u308C%u3082%u51FA%u3089%u308C%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%u306A%u304F%3C/span%3E%u3001%u5F8C%u3067%u6C17%u3065%u3044%u305F%u306E%u3067%u307E%u305A%u5C0F%u6817%u541B%u306B%u96FB%u8A71%u3059%u308B%u3068%u3001%u4E8C%u4EBA%u304C%u4E00%u7DD2%u306B%u3044%u305F%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u3088%u3046%u3067%3C/span%3E%u7ADC%u4E5F%u541B%u304C%26rdquo%3B%u306A%u3093%u3067%u4FFA%u306B%u306F%u7740%u4FE1%u3092%u8FD4%u3055%u306A%u3044%u306E%26rdquo%3B%u3068%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u3059%u306D%u3066%u3044%u305F%3C/span%3E%u3068%u3053%u308D%u304C%u304B%u308F%u3044%u3044%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%26nbsp%3B%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%u5176%u4E2D%u6211%u60F3%u8ACB%u554F%u4E09%u500B%u90E8%u5206%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%26nbsp%3B%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u7B2C%u4E00%u53E5%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22color%3A%20%23FF0000%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u3042%u3063%u305F%u306E%u3067%u3059%u304C%20%u70BA%u4EC0%u9EBC%u7528%20%u306E%u3067%u3059%u304C%20%3F%26nbsp%3B%26nbsp%3B%3C/span%3E%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u8DDF%u7528%3C/span%3E%3Cspan%20style%3D%22color%3A%20%23FF0000%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u3042%u3063%u305F%u3067%u3059%u304C%3C/span%3E%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u610F%u601D%u4E0D%u4E00%u6A23%u55CE%3F%20%u4E0D%u592A%u77E5%u9053%u70BA%u4EC0%u9EBC%u7528%u3000%26rdquo%3B%u306E%26rdquo%3B%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%26nbsp%3B%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%u53E6%u5916%u8ACB%u554F%u4E2D%u9593%u90E8%u5206%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%u5C0F%u6817%uFF08%u304A%u3050%u308A%uFF09%u541B%u304B%u3089%u7740%u4FE1%u304C%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%u3042%u308A%3C/span%3E%u3001%u305D%u308C%u3082%u51FA%u3089%u308C%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%u306A%u304F%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u80FD%u4E0D%u80FD%u6539%u6210%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u5C0F%u6817%uFF08%u304A%u3050%u308A%uFF09%u541B%u304B%u3089%u7740%u4FE1%u304C%3C/span%3E%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u3042%u3063%u3066%3C/span%3E%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u3001%u305D%u308C%u3082%u51FA%u3089%u308C%3C/span%3E%3Cspan%20style%3D%22color%3A%20%23ff6600%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u306A%u304F%u3066%3C/span%3E%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u56E0%u70BA%u4E00%u76F4%u4EE5%u4F86%u90FD%u662F%u7FD2%u6163%26nbsp%3B%3Cspan%20style%3D%22color%3A%20%23ff0000%3B%22%3E%uFF5E%u305F%u308A%uFF5E%3C/span%3E%26nbsp%3B%26nbsp%3B%u6216%u662F%u4EE5%u52D5%u4F5C%3Cspan%20style%3D%22color%3A%20%23ff0000%3B%22%3E%uFF5E%u3066%uFF5E%u3066%3C/span%3E%u4F86%u8868%u793A%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u60F3%u8ACB%u554F%u4E00%u4E0B%u5176%u4E2D%u5DEE%u5225%20%u4F8B%u5982%20%u3042%u308A%u3001%u3042%u3063%u3066%u7684%u5DEE%u5225%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%26nbsp%3B%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u53E6%u5916%u8ACB%u554F%26nbsp%3B%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u4E8C%u4EBA%u304C%u4E00%u7DD2%u306B%u3044%u305F%3C/span%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%u3088%u3046%u3067%20%u5176%u4E2D%u3088%u3046%u3067%u662F%u4EC0%u9EBC%u610F%u601D%20%u53C8%u8A72%u600E%u9EBC%u4F7F%u7528%u5462%3F%3C/span%3E%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%3Cspan%20style%3D%22color%3A%20red%3B%22%3E%26nbsp%3B%3C/span%3E%3C/span%3E%3C/div%3E%0A%3Cdiv%20style%3D%22margin%3A%200px%3B%20padding%3A%200px%3B%22%3E%3Cspan%20style%3D%22font-family%3A%20MS%20Mincho%3B%22%3E%u9EBB%u7169%u9AD8%u624B%u5011%u6307%u6559%u4E86%20%u5982%u679C%u53EF%u4EE5%u7684%u8A71%20%u53EF%u4EE5%u9EBB%u7169%u9644%u4E0A%u53E6%u5916%u4F8B%u53E5%u4F5C%u6BD4%u8F03%u597D%u8B93%u5C0F%u5F1F%u4E86%u89E3%u5B78%u7FD2%u55CE%20%u8B1D%u8B1D%3C/span%3E%3C/div%3E%0A%3C/div%3E"));

        })
        //<----------------------------欄位驗證並寫入-------------------------------->
        $("#submit").click(function () {
            if (document.cookie != "") {
                if ($("select[name='Category']").val() == null || $("input[name='Title']").val() == "" || tinymce.get("Main").getContent() == "") {
                    $("#Edit-msg").html("尚有資料未填寫!!")
                    return;
                }
                var form = document.querySelector("#form-Article");
                var formdata = new FormData(form);
                formdata.set('Main', escape(tinymce.get("Main").getContent()));
                //formdata.append('ArticleID', (hr[hr.length - 1]) / 1)
                formdata.append('MemberID', (document.cookie.split('MemberID=')[1].split("&")[0]) / 1)
                $.ajax({
                    url: "/Discuss/CreateDiscuss",
                    type: "POST",
                    data: formdata,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        window.location.href = "/Discuss/vDiscussSingle/" + data;
                    },
                })
            }
            else
                $('#modalLOReg').modal('show')
        })
    </script>
}
